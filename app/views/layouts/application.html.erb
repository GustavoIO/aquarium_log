<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Aquarium Log</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <style>
      .parameter-tab.active { background-color: #0d6efd !important; color: white !important; }
      .highlight-column { background-color: rgba(13, 110, 253, 0.1); }
      .navbar-brand { font-weight: bold; }
      .current-aquarium { font-size: 0.9rem; opacity: 0.8; }

      /* Responsive styles */
      @media (max-width: 576px) {
        h1 { font-size: 1.5rem; }
        .btn { padding: 0.375rem 0.5rem; font-size: 0.875rem; }
        .btn-sm { padding: 0.25rem 0.4rem; font-size: 0.75rem; }
        .table { font-size: 0.8rem; }
        .table td, .table th { padding: 0.4rem; }
        .card-header { padding: 0.75rem; }
        .card-body { padding: 0.75rem; }
        .param-tabs { overflow-x: auto; white-space: nowrap; -webkit-overflow-scrolling: touch; }
        .param-tabs .btn-group { flex-wrap: nowrap; }
        .navbar-brand { font-size: 1rem; }
        .dropdown-toggle { font-size: 0.8rem; padding: 0.25rem 0.5rem; }
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary mb-4">
      <div class="container">
        <%= link_to "Aquarium Log", root_path, class: "navbar-brand" %>
        <% aquariums = Aquarium.order(:name) %>
        <% if aquariums.any? %>
          <div class="dropdown">
            <button class="btn btn-outline-light dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
              <%= current_aquarium&.name || "Select Aquarium" %>
            </button>
            <ul class="dropdown-menu dropdown-menu-end">
              <% aquariums.each do |aquarium| %>
                <li>
                  <%= link_to aquarium.name, aquarium, class: "dropdown-item #{'active' if current_aquarium&.id == aquarium.id}" %>
                </li>
              <% end %>
              <li><hr class="dropdown-divider"></li>
              <li><%= link_to "+ New Aquarium", new_aquarium_path, class: "dropdown-item" %></li>
            </ul>
          </div>
        <% end %>
      </div>
    </nav>

    <div class="container">
      <% if flash[:notice] %>
        <div class="alert alert-success alert-dismissible fade show" role="alert">
          <%= flash[:notice] %>
          <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
      <% end %>
      <% if flash[:alert] %>
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
          <%= flash[:alert] %>
          <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
      <% end %>

      <%= yield %>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
